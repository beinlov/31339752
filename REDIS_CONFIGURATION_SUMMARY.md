# âœ… Redisé…ç½®å®Œæˆæ€»ç»“

## ğŸ“¦ Rediså®‰è£…ä¿¡æ¯

- **ç‰ˆæœ¬**: Redis 5.0.7
- **ç«¯å£**: 6379
- **å†…å­˜ä½¿ç”¨**: ~840KB
- **é…ç½®æ–‡ä»¶**: `/etc/redis/redis.conf`
- **æœåŠ¡åç§°**: `redis-server`

## âœ… é…ç½®å®Œæˆé¡¹

1. âœ… Rediså·²æˆåŠŸå®‰è£…
2. âœ… RedisæœåŠ¡å·²å¯åŠ¨å¹¶è¿è¡Œ
3. âœ… Rediså·²é…ç½®ä¸ºå¼€æœºè‡ªå¯
4. âœ… ç«¯å£6379æ­£å¸¸ç›‘å¬
5. âœ… å¯ä»¥æ­£å¸¸è¿æ¥å’Œå“åº”

## ğŸ” éªŒè¯Redisè¿è¡ŒçŠ¶æ€

```bash
# æµ‹è¯•Redisè¿æ¥
redis-cli ping
# åº”è¿”å›: PONG

# æŸ¥çœ‹Redisä¿¡æ¯
redis-cli INFO server

# æŸ¥çœ‹RedisæœåŠ¡çŠ¶æ€
sudo systemctl status redis-server
```

## ğŸ¯ Redisåœ¨å¹³å°ä¸­çš„ä½œç”¨

### æ—¥å¿—å¤„ç†å™¨çš„Redisä¾èµ–

**æ—¥å¿—å¤„ç†æµç¨‹**:
```
è¿œç¨‹èœœç½ â†’ HTTPä¸Šä¼  â†’ åç«¯API â†’ Redisé˜Ÿåˆ— â†’ æ—¥å¿—å¤„ç†å™¨ â†’ MySQLæ•°æ®åº“
```

**Redisé˜Ÿåˆ—**:
- é˜Ÿåˆ—åç§°: `log_queue` (æˆ–é…ç½®çš„å…¶ä»–åç§°)
- æ•°æ®æ ¼å¼: JSONæ ¼å¼çš„æ—¥å¿—æ•°æ®
- ä½œç”¨: ç¼“å†²å¾…å¤„ç†çš„æ—¥å¿—ï¼Œæ”¯æŒå¼‚æ­¥å¤„ç†

### Rediså‘½ä»¤ç¤ºä¾‹

```bash
# è¿æ¥Redis
redis-cli

# æŸ¥çœ‹æ‰€æœ‰é”®
KEYS *

# æŸ¥çœ‹é˜Ÿåˆ—é•¿åº¦
LLEN log_queue

# æŸ¥çœ‹é˜Ÿåˆ—å†…å®¹ï¼ˆä¸åˆ é™¤ï¼‰
LRANGE log_queue 0 10

# æ¸…ç©ºæ‰€æœ‰æ•°æ®ï¼ˆæ…ç”¨ï¼ï¼‰
FLUSHALL
```

## âš™ï¸ RedisæœåŠ¡ç®¡ç†

```bash
# å¯åŠ¨Redis
sudo systemctl start redis-server

# åœæ­¢Redis
sudo systemctl stop redis-server

# é‡å¯Redis
sudo systemctl restart redis-server

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status redis-server

# å¯ç”¨å¼€æœºè‡ªå¯ï¼ˆå·²é…ç½®ï¼‰
sudo systemctl enable redis-server

# ç¦ç”¨å¼€æœºè‡ªå¯
sudo systemctl disable redis-server
```

## ğŸ“ Redisé…ç½®è¯´æ˜

### é»˜è®¤é…ç½®
- **ç»‘å®šåœ°å€**: 127.0.0.1 (ä»…æœ¬åœ°è®¿é—®)
- **ç«¯å£**: 6379
- **æœ€å¤§å†…å­˜**: æœªé™åˆ¶
- **æŒä¹…åŒ–**: RDB + AOF
- **å¯†ç **: æœªè®¾ç½®ï¼ˆæœ¬åœ°å¼€å‘ç¯å¢ƒï¼‰

### ç”Ÿäº§ç¯å¢ƒå»ºè®®

å¦‚æœç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œå»ºè®®ä¿®æ”¹é…ç½®:

```bash
# ç¼–è¾‘é…ç½®æ–‡ä»¶
sudo nano /etc/redis/redis.conf

# å»ºè®®ä¿®æ”¹é¡¹:
# 1. è®¾ç½®å¯†ç 
requirepass your_strong_password_here

# 2. é™åˆ¶æœ€å¤§å†…å­˜ï¼ˆå¦‚2GBï¼‰
maxmemory 2gb
maxmemory-policy allkeys-lru

# 3. å¯ç”¨æŒä¹…åŒ–
save 900 1
save 300 10
save 60 10000

# ä¿®æ”¹åé‡å¯Redis
sudo systemctl restart redis-server
```

## ğŸ”’ å®‰å…¨å»ºè®®

### å¼€å‘ç¯å¢ƒï¼ˆå½“å‰é…ç½®ï¼‰
- âœ… ä»…æœ¬åœ°è®¿é—®ï¼ˆ127.0.0.1ï¼‰
- âœ… é˜²ç«å¢™é»˜è®¤é˜»æ­¢å¤–éƒ¨è®¿é—®
- âš ï¸ æœªè®¾ç½®å¯†ç ï¼ˆæœ¬åœ°å¼€å‘å¯æ¥å—ï¼‰

### ç”Ÿäº§ç¯å¢ƒå»ºè®®
- ğŸ”’ è®¾ç½®å¼ºå¯†ç 
- ğŸ”’ é™åˆ¶æœ€å¤§å†…å­˜ä½¿ç”¨
- ğŸ”’ å¯ç”¨æŒä¹…åŒ–
- ğŸ”’ å®šæœŸå¤‡ä»½
- ğŸ”’ ç›‘æ§RedisçŠ¶æ€

## ğŸ› æ•…éšœæ’æŸ¥

### Redisæ— æ³•å¯åŠ¨

```bash
# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
sudo journalctl -u redis-server -n 50

# æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
sudo lsof -i :6379

# æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
redis-server /etc/redis/redis.conf --test-memory 1
```

### Redisè¿æ¥è¶…æ—¶

```bash
# æ£€æŸ¥Redisæ˜¯å¦è¿è¡Œ
sudo systemctl status redis-server

# æ£€æŸ¥ç«¯å£ç›‘å¬
netstat -tuln | grep 6379

# æµ‹è¯•æœ¬åœ°è¿æ¥
redis-cli -h 127.0.0.1 -p 6379 ping
```

### æ—¥å¿—å¤„ç†å™¨è¿æ¥Rediså¤±è´¥

```bash
# 1. ç¡®è®¤Redisè¿è¡Œ
redis-cli ping

# 2. æ£€æŸ¥Python Redisåº“
pip3 list | grep redis

# 3. å¦‚æœªå®‰è£…ï¼Œå®‰è£…Redisåº“
pip3 install redis

# 4. æŸ¥çœ‹æ—¥å¿—å¤„ç†å™¨æ—¥å¿—
tail -50 backend/logs/log_processor.log
```

## ğŸ“Š ç›‘æ§Redis

### å®æ—¶ç›‘æ§

```bash
# å®æ—¶ç›‘æ§æ‰€æœ‰å‘½ä»¤
redis-cli MONITOR

# æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
redis-cli INFO stats

# æŸ¥çœ‹å®¢æˆ·ç«¯è¿æ¥
redis-cli CLIENT LIST

# æŸ¥çœ‹æ…¢æŸ¥è¯¢
redis-cli SLOWLOG GET 10
```

## âœ… é…ç½®æ£€æŸ¥æ¸…å•

- [x] Rediså·²å®‰è£…
- [x] RedisæœåŠ¡è¿è¡Œä¸­
- [x] ç«¯å£6379å¯è®¿é—®
- [x] è¿æ¥æµ‹è¯•é€šè¿‡ï¼ˆPONGï¼‰
- [x] å¼€æœºè‡ªå¯å·²é…ç½®
- [x] æ—¥å¿—å¤„ç†å™¨å¯ä½¿ç”¨

## ğŸ‰ æ€»ç»“

**Redisé…ç½®å®Œæˆï¼**

âœ… **å®‰è£…**: Redis 5.0.7å·²å®‰è£…  
âœ… **è¿è¡Œ**: æœåŠ¡æ­£å¸¸è¿è¡Œåœ¨ç«¯å£6379  
âœ… **å¼€æœºè‡ªå¯**: å·²é…ç½®systemdè‡ªå¯  
âœ… **è¿æ¥**: æœ¬åœ°è¿æ¥æ­£å¸¸  
âœ… **å‡†å¤‡å°±ç»ª**: æ—¥å¿—å¤„ç†å™¨å¯ä»¥ä½¿ç”¨Redisé˜Ÿåˆ—  

**ä¸‹ä¸€æ­¥**: ä½¿ç”¨ `./start_all_services.sh` å¯åŠ¨å®Œæ•´å¹³å°

---

*é…ç½®å®Œæˆæ—¶é—´: 2026-01-21*
