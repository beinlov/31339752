# ğŸ³ Docker MySQL vs åŸç”ŸMySQL å¯¹æ¯”åˆ†æ

**åŸºäºå®é™…ç”Ÿäº§ç¯å¢ƒæµ‹è¯•** - 62GBå†…å­˜ï¼Œ3.6TBç£ç›˜æœåŠ¡å™¨

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

### å®æµ‹æ•°æ®ï¼ˆå½“å‰Docker MySQLç¯å¢ƒï¼‰

| æµ‹è¯•é¡¹ç›® | Docker MySQL | é¢„æœŸåŸç”ŸMySQL | å·®å¼‚ |
|---------|-------------|--------------|------|
| **æ‰¹é‡æ’å…¥** | 6,845 æ¡/ç§’ | 7,000-7,500 æ¡/ç§’ | ~5-10% |
| **æŸ¥è¯¢å“åº”** | < 12ms | < 10ms | ~10-20% |
| **CPUå¼€é”€** | 0.65% | 0.5-0.6% | å¯å¿½ç•¥ |
| **å†…å­˜å¼€é”€** | 1.03 GB (1.63%) | 1.0 GB | <3% |
| **ç½‘ç»œå»¶è¿Ÿ** | æœ¬åœ°: 0.01-0.1ms | 0ms (socket) | å¯å¿½ç•¥ |

### ğŸ¯ æ€§èƒ½ç»“è®º

**Dockerçš„æ€§èƒ½å¼€é”€ï¼š< 5-10%**

1. **CPUå¼€é”€**: Dockerå®¹å™¨çš„CPUè™šæ‹ŸåŒ–å¼€é”€éå¸¸å°ï¼ˆ< 2-3%ï¼‰
2. **å†…å­˜å¼€é”€**: å‡ ä¹æ²¡æœ‰é¢å¤–å†…å­˜å¼€é”€
3. **I/Oæ€§èƒ½**: 
   - ä½¿ç”¨`volume`ç›´æ¥æŒ‚è½½å®¿ä¸»æœºç›®å½•ï¼ŒI/Oæ€§èƒ½æ¥è¿‘åŸç”Ÿ
   - æˆ‘ä»¬çš„æµ‹è¯•ï¼š51.5GBç£ç›˜å†™å…¥ï¼Œé€Ÿåº¦æ­£å¸¸
4. **ç½‘ç»œå¼€é”€**: 
   - å®¹å™¨é—´é€šä¿¡ä½¿ç”¨`localhost`ï¼Œå¼€é”€æå°
   - å¦‚æœä½¿ç”¨Dockerç½‘ç»œï¼Œå¯èƒ½å¢åŠ 1-2%å»¶è¿Ÿ

**å®é™…å½±å“**: å¯¹äºæ—¥å¿—å¤„ç†ç³»ç»Ÿï¼ˆæ¯åˆ†é’Ÿ2000æ¡ï¼‰ï¼Œæ€§èƒ½å·®å¼‚**å®Œå…¨å¯ä»¥å¿½ç•¥**

---

## ğŸ”§ ç»´æŠ¤éš¾åº¦å¯¹æ¯”

### Docker MySQL âœ…

#### ä¼˜ç‚¹

| ç»´æŠ¤ä»»åŠ¡ | Dockeræ–¹å¼ | éš¾åº¦ |
|---------|-----------|------|
| **å®‰è£…éƒ¨ç½²** | `docker run ...` ä¸€æ¡å‘½ä»¤ | â­ æç®€ |
| **ç‰ˆæœ¬åˆ‡æ¢** | ä¿®æ”¹é•œåƒæ ‡ç­¾ï¼Œé‡å¯å®¹å™¨ | â­ æç®€ |
| **é…ç½®ä¿®æ”¹** | æŒ‚è½½é…ç½®æ–‡ä»¶ï¼Œé‡å¯å®¹å™¨ | â­â­ ç®€å• |
| **å¤šç‰ˆæœ¬æµ‹è¯•** | åŒæ—¶è¿è¡Œå¤šä¸ªå®¹å™¨ï¼ˆä¸åŒç«¯å£ï¼‰ | â­ æç®€ |
| **ç¯å¢ƒè¿ç§»** | å¯¼å‡ºé•œåƒ/å·ï¼Œåœ¨æ–°æœåŠ¡å™¨å¯¼å…¥ | â­â­ ç®€å• |
| **å›æ»š** | ä¿ç•™æ—§å®¹å™¨ï¼Œåˆ‡æ¢å³å¯ | â­ æç®€ |
| **éš”ç¦»æ€§** | å®Œå…¨éš”ç¦»ï¼Œä¸å½±å“ç³»ç»Ÿ | â­ ä¼˜ç§€ |

#### ç¼ºç‚¹

| é—®é¢˜ | å½±å“ | è§£å†³æ–¹æ¡ˆ |
|------|------|---------|
| éœ€è¦å­¦ä¹ DockeråŸºç¡€ | åˆæœŸå­¦ä¹ æˆæœ¬ | 1-2å¤©å…¥é—¨ |
| é…ç½®æ–‡ä»¶è·¯å¾„ä¸åŒ | éœ€è¦äº†è§£å®¹å™¨å†…è·¯å¾„ | æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ |
| æ—¥å¿—æŸ¥çœ‹æ–¹å¼ä¸åŒ | `docker logs` è€Œä¸æ˜¯ç›´æ¥çœ‹æ–‡ä»¶ | ä¹ æƒ¯åæ›´æ–¹ä¾¿ |
| ç½‘ç»œé—®é¢˜æ’æŸ¥ | éœ€è¦ç†è§£Dockerç½‘ç»œ | ä½¿ç”¨`host`ç½‘ç»œæ¨¡å¼ |

### åŸç”ŸMySQL ğŸ–¥ï¸

#### ä¼˜ç‚¹

| ç»´æŠ¤ä»»åŠ¡ | åŸç”Ÿæ–¹å¼ | éš¾åº¦ |
|---------|---------|------|
| **ç›´æ¥è®¿é—®** | ç›´æ¥æ“ä½œæ–‡ä»¶å’Œè¿›ç¨‹ | â­ ç›´è§‚ |
| **ç³»ç»Ÿé›†æˆ** | ç³»ç»ŸæœåŠ¡ç®¡ç†ï¼ˆsystemdï¼‰ | â­â­ æ ‡å‡† |
| **ä¼ ç»Ÿè¿ç»´** | ç¬¦åˆä¼ ç»Ÿè¿ç»´ä¹ æƒ¯ | â­ ç†Ÿæ‚‰ |

#### ç¼ºç‚¹

| é—®é¢˜ | å½±å“ | éš¾åº¦ |
|------|------|------|
| **å®‰è£…é…ç½®** | éœ€è¦é…ç½®ç³»ç»Ÿä¾èµ–ã€ç”¨æˆ·æƒé™ | â­â­â­ å¤æ‚ |
| **ç‰ˆæœ¬å†²çª** | ç³»ç»Ÿåº“ç‰ˆæœ¬å†²çª | â­â­â­â­ å›°éš¾ |
| **ç¯å¢ƒæ±¡æŸ“** | æ–‡ä»¶æ•£è½åœ¨ç³»ç»Ÿå„å¤„ | â­â­â­ ä¸­ç­‰ |
| **å¤šç‰ˆæœ¬å…±å­˜** | å‡ ä¹ä¸å¯èƒ½ï¼ˆä¸åŒç«¯å£ä¹Ÿéº»çƒ¦ï¼‰ | â­â­â­â­â­ æéš¾ |
| **è¿ç§»** | éœ€è¦é‡æ–°å®‰è£…é…ç½® | â­â­â­â­ å›°éš¾ |
| **å¸è½½** | æ®‹ç•™æ–‡ä»¶å’Œé…ç½® | â­â­â­ ä¸­ç­‰ |

---

## ğŸ“¦ éƒ¨ç½²å’Œç®¡ç†å¯¹æ¯”

### 1ï¸âƒ£ åˆå§‹éƒ¨ç½²

#### Dockeræ–¹å¼
```bash
# ä¸€æ¡å‘½ä»¤ï¼Œ30ç§’å®Œæˆ
docker run -d \
  --name mysql \
  -p 3306:3306 \
  -e MYSQL_ROOT_PASSWORD=yourpassword \
  -v mysql-data:/var/lib/mysql \
  -v ./my.cnf:/etc/mysql/conf.d/custom.cnf \
  mysql:8.0

# éªŒè¯
docker exec mysql mysql -uroot -p -e "SELECT VERSION();"
```

**è€—æ—¶**: ~30ç§’ï¼ˆé¦–æ¬¡éœ€è¦ä¸‹è½½é•œåƒï¼‰

#### åŸç”Ÿæ–¹å¼
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install mysql-server
sudo mysql_secure_installation
sudo systemctl start mysql
sudo systemctl enable mysql

# é…ç½®ç”¨æˆ·æƒé™
sudo mysql -e "ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'yourpassword';"

# é…ç½®é˜²ç«å¢™
sudo ufw allow 3306

# ç¼–è¾‘é…ç½®æ–‡ä»¶
sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf
sudo systemctl restart mysql
```

**è€—æ—¶**: ~10-15åˆ†é’Ÿï¼ˆéœ€è¦å¤„ç†å„ç§é…ç½®ï¼‰

### 2ï¸âƒ£ é…ç½®ä¿®æ”¹

#### Dockeræ–¹å¼
```bash
# 1. ç¼–è¾‘å®¿ä¸»æœºé…ç½®æ–‡ä»¶
nano ./mysql/conf/my.cnf

# 2. é‡å¯å®¹å™¨ï¼ˆç§’çº§ï¼‰
docker restart mysql

# 3. éªŒè¯
docker exec mysql mysql -uroot -p -e "SHOW VARIABLES LIKE 'innodb_buffer_pool_size';"
```

**è€—æ—¶**: ~10ç§’

#### åŸç”Ÿæ–¹å¼
```bash
# 1. ç¼–è¾‘ç³»ç»Ÿé…ç½®æ–‡ä»¶
sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf

# 2. é‡å¯æœåŠ¡
sudo systemctl restart mysql

# 3. éªŒè¯
mysql -uroot -p -e "SHOW VARIABLES LIKE 'innodb_buffer_pool_size';"
```

**è€—æ—¶**: ~30ç§’ï¼ˆæœåŠ¡å¯åŠ¨è¾ƒæ…¢ï¼‰

### 3ï¸âƒ£ ç‰ˆæœ¬å‡çº§

#### Dockeræ–¹å¼
```bash
# 1. å¤‡ä»½å½“å‰å®¹å™¨
docker commit mysql mysql_8.0_backup

# 2. åœæ­¢æ—§å®¹å™¨
docker stop mysql
docker rename mysql mysql_old

# 3. å¯åŠ¨æ–°ç‰ˆæœ¬ï¼ˆå¤ç”¨æ•°æ®å·ï¼‰
docker run -d \
  --name mysql \
  -p 3306:3306 \
  -e MYSQL_ROOT_PASSWORD=yourpassword \
  -v mysql-data:/var/lib/mysql \
  mysql:8.4  # æ–°ç‰ˆæœ¬

# 4. å¦‚æœæœ‰é—®é¢˜ï¼Œç§’çº§å›æ»š
docker stop mysql
docker start mysql_old
```

**é£é™©**: ä½  
**å›æ»š**: ç§’çº§

#### åŸç”Ÿæ–¹å¼
```bash
# 1. å¤‡ä»½æ•°æ®
mysqldump --all-databases > backup.sql

# 2. æ·»åŠ æ–°ç‰ˆæœ¬æº
wget https://dev.mysql.com/get/mysql-apt-config_0.8.x_all.deb
sudo dpkg -i mysql-apt-config_0.8.x_all.deb

# 3. å‡çº§ï¼ˆå¯èƒ½ä¸­æ–­æœåŠ¡ï¼‰
sudo apt update
sudo apt upgrade mysql-server

# 4. å¤„ç†é…ç½®å†²çª
sudo mysql_upgrade -u root -p

# 5. å¦‚æœå¤±è´¥ï¼Œå›æ»šå¾ˆå›°éš¾
# éœ€è¦å¸è½½æ–°ç‰ˆæœ¬ï¼Œé‡è£…æ—§ç‰ˆæœ¬ï¼Œå¯¼å…¥å¤‡ä»½
```

**é£é™©**: ä¸­é«˜  
**å›æ»š**: å›°éš¾ï¼Œéœ€è¦30åˆ†é’Ÿ+

### 4ï¸âƒ£ å¤šç¯å¢ƒç®¡ç†

#### Dockeræ–¹å¼
```bash
# å¼€å‘ç¯å¢ƒ - MySQL 8.0ï¼ˆç«¯å£3306ï¼‰
docker run -d --name mysql-dev -p 3306:3306 -e MYSQL_ROOT_PASSWORD=dev mysql:8.0

# æµ‹è¯•ç¯å¢ƒ - MySQL 8.4ï¼ˆç«¯å£3307ï¼‰
docker run -d --name mysql-test -p 3307:3306 -e MYSQL_ROOT_PASSWORD=test mysql:8.4

# ç”Ÿäº§ç¯å¢ƒ - MySQL 8.0.15ï¼ˆç«¯å£3308ï¼‰
docker run -d --name mysql-prod -p 3308:3306 -e MYSQL_ROOT_PASSWORD=prod mysql:8.0.15

# åŒæ—¶è¿è¡Œï¼Œäº’ä¸å¹²æ‰°
docker ps
```

**å¯è¡Œæ€§**: âœ… å®Œç¾æ”¯æŒ

#### åŸç”Ÿæ–¹å¼
```bash
# å‡ ä¹ä¸å¯èƒ½åœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œå¤šä¸ªMySQLç‰ˆæœ¬
# å³ä½¿å¯ä»¥ï¼Œé…ç½®æå…¶å¤æ‚ï¼š
# - ä¸åŒçš„æ•°æ®ç›®å½•
# - ä¸åŒçš„é…ç½®æ–‡ä»¶
# - ä¸åŒçš„socketæ–‡ä»¶
# - ä¸åŒçš„ç«¯å£
# - ä¸åŒçš„ç³»ç»Ÿç”¨æˆ·
```

**å¯è¡Œæ€§**: âŒ æå…¶å›°éš¾

---

## ğŸ’¾ å¤‡ä»½å’Œæ¢å¤

### Dockeræ–¹å¼

```bash
# æ–¹å¼1: æ•°æ®å·å¤‡ä»½ï¼ˆæ¨èï¼‰
docker run --rm \
  -v mysql-data:/data \
  -v $(pwd):/backup \
  ubuntu tar czf /backup/mysql-data-$(date +%Y%m%d).tar.gz -C /data .

# æ–¹å¼2: å¯¼å‡ºå®¹å™¨å’Œæ•°æ®
docker commit mysql mysql_backup_image
docker save mysql_backup_image > mysql_backup.tar

# æ–¹å¼3: ä¼ ç»Ÿmysqldumpï¼ˆå…¼å®¹åŸç”Ÿï¼‰
docker exec mysql mysqldump -uroot -p --all-databases > backup.sql

# æ¢å¤
docker run -d --name mysql_new -v mysql-data:/var/lib/mysql mysql:8.0
```

### åŸç”Ÿæ–¹å¼

```bash
# æ•°æ®ç›®å½•å¤‡ä»½
sudo service mysql stop
sudo tar czf mysql-backup.tar.gz /var/lib/mysql
sudo service mysql start

# mysqldumpå¤‡ä»½
mysqldump -uroot -p --all-databases > backup.sql

# æ¢å¤
mysql -uroot -p < backup.sql
```

**ç»“è®º**: ä¸¤è€…æ–¹å¼ç±»ä¼¼ï¼Œä½†Dockerçš„å·å¤‡ä»½æ›´çµæ´»

---

## ğŸ” ç›‘æ§å’Œè°ƒè¯•

### Dockeræ–¹å¼

```bash
# æŸ¥çœ‹æ—¥å¿—
docker logs mysql
docker logs -f mysql --tail 100

# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats mysql

# è¿›å…¥å®¹å™¨
docker exec -it mysql bash

# æŸ¥çœ‹é…ç½®
docker exec mysql cat /etc/mysql/my.cnf

# æ€§èƒ½ç›‘æ§
docker exec mysql mysqladmin -uroot -p status
docker exec mysql mysql -uroot -p -e "SHOW PROCESSLIST;"
```

**é¢å¤–å·¥å…·**: éœ€è¦Dockerç›¸å…³ç›‘æ§å·¥å…·

### åŸç”Ÿæ–¹å¼

```bash
# æŸ¥çœ‹æ—¥å¿—
sudo tail -f /var/log/mysql/error.log

# æŸ¥çœ‹èµ„æº
top -p $(pgrep mysql)

# æŸ¥çœ‹é…ç½®
cat /etc/mysql/mysql.conf.d/mysqld.cnf

# æ€§èƒ½ç›‘æ§
mysqladmin -uroot -p status
mysql -uroot -p -e "SHOW PROCESSLIST;"
```

**é¢å¤–å·¥å…·**: ä¼ ç»ŸLinuxç›‘æ§å·¥å…·

**ç»“è®º**: Dockerå¢åŠ äº†ä¸€å±‚æŠ½è±¡ï¼Œä½†æä¾›äº†ç»Ÿä¸€çš„ç®¡ç†æ¥å£

---

## ğŸ† ç»¼åˆå¯¹æ¯”æ€»ç»“

| ç»´åº¦ | Docker MySQL | åŸç”ŸMySQL | èƒœè€… |
|------|-------------|-----------|------|
| **æ€§èƒ½** | 95-98% | 100% | åŸç”Ÿï¼ˆå¾®å¼±ï¼‰ |
| **éƒ¨ç½²é€Ÿåº¦** | â­â­â­â­â­ | â­â­â­ | Docker |
| **ç»´æŠ¤éš¾åº¦** | â­â­â­â­â­ ç®€å• | â­â­â­ ä¸­ç­‰ | Docker |
| **ç‰ˆæœ¬ç®¡ç†** | â­â­â­â­â­ | â­â­ | Docker |
| **ç¯å¢ƒéš”ç¦»** | â­â­â­â­â­ | â­ | Docker |
| **èµ„æºå¼€é”€** | â­â­â­â­ | â­â­â­â­â­ | åŸç”Ÿï¼ˆå¾®å¼±ï¼‰ |
| **å­¦ä¹ æˆæœ¬** | â­â­â­ éœ€è¦å­¦Docker | â­â­â­â­â­ ä¼ ç»Ÿæ–¹å¼ | åŸç”Ÿ |
| **æ•…éšœæ’æŸ¥** | â­â­â­â­ | â­â­â­â­â­ | åŸç”Ÿï¼ˆç¨ä¼˜ï¼‰ |
| **å¯ç§»æ¤æ€§** | â­â­â­â­â­ | â­â­ | Docker |
| **å›æ»šèƒ½åŠ›** | â­â­â­â­â­ | â­â­ | Docker |

---

## ğŸ¯ ä½¿ç”¨å»ºè®®

### æ¨èä½¿ç”¨ Docker MySQL çš„åœºæ™¯ âœ…

1. **å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒ** - å¿«é€Ÿæ­å»ºï¼Œéšæ—¶åˆ é™¤é‡å»º
2. **éœ€è¦å¤šç‰ˆæœ¬å…±å­˜** - ä¸åŒé¡¹ç›®ä½¿ç”¨ä¸åŒMySQLç‰ˆæœ¬
3. **å®¹å™¨åŒ–æ¶æ„** - æ•´ä¸ªåº”ç”¨æ ˆéƒ½ä½¿ç”¨å®¹å™¨
4. **é¢‘ç¹éƒ¨ç½²/è¿ç§»** - å®¹å™¨æ‰“åŒ…å³å¯è¿ç§»
5. **å­¦ä¹ å’Œå®éªŒ** - ä¸æ±¡æŸ“ç³»ç»Ÿç¯å¢ƒ
6. **CI/CDæµç¨‹** - è‡ªåŠ¨åŒ–æµ‹è¯•éœ€è¦å¿«é€Ÿåˆ›å»ºé”€æ¯
7. **å¾®æœåŠ¡æ¶æ„** - æ¯ä¸ªæœåŠ¡ç‹¬ç«‹çš„æ•°æ®åº“

### æ¨èä½¿ç”¨ åŸç”ŸMySQL çš„åœºæ™¯ âœ…

1. **æè‡´æ€§èƒ½è¦æ±‚** - éœ€è¦æ¦¨å¹²æœ€å5-10%æ€§èƒ½
2. **ä¼ ç»Ÿè¿ç»´å›¢é˜Ÿ** - å›¢é˜Ÿä¸ç†Ÿæ‚‰Docker
3. **è¶…å¤§è§„æ¨¡æ•°æ®åº“** - TBçº§æ•°æ®ï¼Œéœ€è¦ç²¾ç»†è°ƒä¼˜
4. **ç‰¹æ®Šç¡¬ä»¶ä¼˜åŒ–** - éœ€è¦ç›´æ¥è®¿é—®ç¡¬ä»¶ï¼ˆå¦‚NVMeä¼˜åŒ–ï¼‰
5. **ç›‘ç®¡åˆè§„è¦æ±‚** - æŸäº›è¡Œä¸šè¦æ±‚ä¼ ç»Ÿéƒ¨ç½²æ–¹å¼
6. **å·²æœ‰æˆç†Ÿè¿ç»´ä½“ç³»** - ä¸æƒ³æ”¹å˜ç°æœ‰æµç¨‹

---

## ğŸ’¡ å½“å‰é¡¹ç›®åˆ†æ

### ä½ çš„åƒµå°¸ç½‘ç»œå¹³å°

**æœåŠ¡å™¨é…ç½®**:
- å†…å­˜: 62 GB
- ç£ç›˜: 3.6 TB
- æ•°æ®åº“å¤§å°: ~686 MBï¼ˆå½“å‰ï¼‰

**è´Ÿè½½ç‰¹å¾**:
- å†™å…¥: æ¯åˆ†é’Ÿ 2,000 æ¡
- æŸ¥è¯¢: ä¸­ç­‰é¢‘ç‡
- å¹¶å‘: ç›¸å¯¹è¾ƒä½

**å®æµ‹Docker MySQLæ€§èƒ½**:
- æ‰¹é‡æ’å…¥: 6,845 æ¡/ç§’ = **410,715 æ¡/åˆ†é’Ÿ**
- éœ€æ±‚: 2,000 æ¡/åˆ†é’Ÿ
- **æ€§èƒ½ä½™é‡: 205å€**

### ğŸ¯ ç»“è®ºï¼šä½¿ç”¨ Docker MySQL **å®Œå…¨åˆé€‚**

**ç†ç”±**:
1. âœ… **æ€§èƒ½å……è¶³**: 5-10%çš„æ€§èƒ½æŸå¤±å¯¹ä½ çš„åœºæ™¯**å®Œå…¨å¯å¿½ç•¥**
2. âœ… **ç»´æŠ¤ç®€å•**: é…ç½®ä¼˜åŒ–ã€ç‰ˆæœ¬å‡çº§éƒ½å¾ˆæ–¹ä¾¿
3. âœ… **éš”ç¦»æ€§å¥½**: ä¸å½±å“ç³»ç»Ÿå…¶ä»–æœåŠ¡
4. âœ… **ä¾¿äºè¿ç§»**: æœªæ¥è¿ç§»åˆ°å…¶ä»–æœåŠ¡å™¨å¾ˆç®€å•
5. âœ… **å›æ»šæ–¹ä¾¿**: å‡çº§å¤±è´¥å¯ä»¥ç§’çº§å›æ»š

**ä¸æ¨èåˆ‡æ¢åˆ°åŸç”Ÿçš„ç†ç”±**:
- âŒ æ€§èƒ½æå‡å¾®ä¹å…¶å¾®ï¼ˆ< 5-10%ï¼Œä½ ç”¨ä¸åˆ°ï¼‰
- âŒ ç»´æŠ¤å¤æ‚åº¦æ˜¾è‘—å¢åŠ 
- âŒ å¤±å»å®¹å™¨åŒ–çš„çµæ´»æ€§
- âŒ è¿ç§»æˆæœ¬é«˜

---

## ğŸ“Š å®é™…æ€§èƒ½æ•°æ®å¯¹æ¯”

### å½“å‰Docker MySQLï¼ˆä¼˜åŒ–åï¼‰

```
é…ç½®:
- innodb_buffer_pool_size: 32 GB
- innodb_io_capacity: 2000
- å®¹å™¨è¿è¡Œæ—¶é—´: 19å°æ—¶

æ€§èƒ½æµ‹è¯•ç»“æœ:
- æ‰¹é‡æ’å…¥ (2000æ¡): 0.29ç§’ (6,845æ¡/ç§’)
- æŸ¥è¯¢è®¡æ•°: 1.81ms
- æŸ¥è¯¢TOP 100: 11.16ms
- èšåˆæŸ¥è¯¢: 3.16ms
- èµ„æºå ç”¨: CPU 0.65%, å†…å­˜ 1.03GB
```

### é¢„æœŸåŸç”ŸMySQLï¼ˆç†è®ºï¼‰

```
é…ç½®: ç›¸åŒ
æ€§èƒ½æå‡: 5-10%

é¢„æœŸæ€§èƒ½:
- æ‰¹é‡æ’å…¥: 7,000-7,500æ¡/ç§’
- æŸ¥è¯¢è®¡æ•°: 1.6-1.8ms
- æŸ¥è¯¢TOP 100: 10-11ms
- èšåˆæŸ¥è¯¢: 2.8-3.0ms
- èµ„æºå ç”¨: CPU 0.5-0.6%, å†…å­˜ 1.0GB
```

**å®é™…å½±å“**: å¯¹ä½ çš„åº”ç”¨**å®Œå…¨æ„ŸçŸ¥ä¸åˆ°å·®å¼‚**

---

## ğŸ”„ å¦‚æœè¦åˆ‡æ¢åˆ°åŸç”ŸMySQL

### è¿ç§»æ­¥éª¤ï¼ˆå¦‚æœç¡®å®éœ€è¦ï¼‰

```bash
# 1. å¯¼å‡ºæ•°æ®
docker exec mysql mysqldump -uroot -pMatrix123 --all-databases > all_databases.sql

# 2. å®‰è£…åŸç”ŸMySQL
sudo apt update
sudo apt install mysql-server

# 3. é…ç½®MySQL
sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf
# å¤åˆ¶Dockeré…ç½®åˆ°è¿™é‡Œ

# 4. å¯¼å…¥æ•°æ®
mysql -uroot -p < all_databases.sql

# 5. éªŒè¯
mysql -uroot -p -e "SELECT COUNT(*) FROM botnet.users;"

# 6. æ›´æ–°åº”ç”¨é…ç½®ï¼ˆæ— éœ€æ”¹åŠ¨ï¼Œä»ç„¶è¿æ¥localhost:3306ï¼‰

# 7. åœæ­¢Docker MySQL
docker stop mysql
```

**é¢„è®¡è€—æ—¶**: 30-60åˆ†é’Ÿ  
**é£é™©**: ä¸­ç­‰  
**æ”¶ç›Š**: < 5-10%æ€§èƒ½æå‡ï¼ˆå¯¹ä½ çš„åœºæ™¯å¯å¿½ç•¥ï¼‰

---

## ğŸ“ ç»“è®ºå’Œå»ºè®®

### å¯¹äºä½ çš„é¡¹ç›®

**å»ºè®®ï¼šç»§ç»­ä½¿ç”¨ Docker MySQL** âœ…

**ç†ç”±æ€»ç»“**:

1. **æ€§èƒ½è¶³å¤Ÿ**: 
   - éœ€æ±‚: 2,000æ¡/åˆ†é’Ÿ
   - å®æµ‹: 410,715æ¡/åˆ†é’Ÿ
   - ä½™é‡: 205å€
   - **ç»“è®º**: å³ä½¿æœ‰10%æ€§èƒ½æŸå¤±ä¹Ÿå®Œå…¨å¤Ÿç”¨

2. **ç»´æŠ¤æ–¹ä¾¿**:
   - ä»Šå¤©çš„ä¼˜åŒ–è¯æ˜äº†è¿™ä¸€ç‚¹
   - 10åˆ†é’Ÿå®Œæˆäº†é…ç½®ä¼˜åŒ–å’Œå®¹å™¨é‡å»º
   - åŸç”ŸMySQLéœ€è¦30-60åˆ†é’Ÿ

3. **é£é™©å¯æ§**:
   - å›æ»šç®€å•
   - ç‰ˆæœ¬åˆ‡æ¢æ–¹ä¾¿
   - ä¸æ±¡æŸ“ç³»ç»Ÿç¯å¢ƒ

4. **æœªæ¥æ‰©å±•**:
   - å¯èƒ½éœ€è¦è¯»å†™åˆ†ç¦» â†’ Dockerå®¹å™¨æ›´æ–¹ä¾¿
   - å¯èƒ½éœ€è¦æµ‹è¯•ç¯å¢ƒ â†’ Dockerç§’çº§åˆ›å»º
   - å¯èƒ½éœ€è¦è¿ç§»æœåŠ¡å™¨ â†’ Dockeræ‰“åŒ…å³å¯

### ä»€ä¹ˆæ—¶å€™è€ƒè™‘åˆ‡æ¢åˆ°åŸç”Ÿï¼Ÿ

åªæœ‰åœ¨ä»¥ä¸‹æƒ…å†µä¸‹æ‰å€¼å¾—è€ƒè™‘ï¼š

1. **æ€§èƒ½ç“¶é¢ˆæ˜ç¡®**: ç¡®è®¤Dockeræ˜¯ç“¶é¢ˆï¼ˆæå°‘å‘ç”Ÿï¼‰
2. **ç‰¹æ®Šç¡¬ä»¶ä¼˜åŒ–**: éœ€è¦ç›´æ¥æ“ä½œå­˜å‚¨è®¾å¤‡
3. **å›¢é˜Ÿè¦æ±‚**: è¿ç»´å›¢é˜Ÿå¼ºçƒˆåå¯¹Docker
4. **åˆè§„è¦æ±‚**: ç›‘ç®¡éƒ¨é—¨ç¦æ­¢å®¹å™¨åŒ–

---

## ğŸ“š å­¦ä¹ èµ„æº

### Docker MySQLæœ€ä½³å®è·µ

1. **å®˜æ–¹æ–‡æ¡£**: https://hub.docker.com/_/mysql
2. **é…ç½®ä¼˜åŒ–**: https://dev.mysql.com/doc/refman/8.0/en/optimization.html
3. **Dockeræœ€ä½³å®è·µ**: https://docs.docker.com/develop/dev-best-practices/

### ç›‘æ§å·¥å…·æ¨è

- **Portainer**: Dockerå®¹å™¨å¯è§†åŒ–ç®¡ç†
- **cAdvisor**: å®¹å™¨èµ„æºç›‘æ§
- **Prometheus + Grafana**: ç»¼åˆç›‘æ§æ–¹æ¡ˆ

---

**æœ€ç»ˆå»ºè®®**: ä¿æŒä½¿ç”¨Docker MySQLï¼Œä¸“æ³¨äºåº”ç”¨å±‚é¢çš„ä¼˜åŒ–ï¼Œæ€§èƒ½å®Œå…¨å¤Ÿç”¨ï¼ğŸš€

*æ›´æ–°æ—¶é—´: 2026-01-22*
